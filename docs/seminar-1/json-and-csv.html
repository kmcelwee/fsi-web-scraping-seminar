<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <title>File formats - FSI Web Scraping Seminar</title> <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon"> <link rel="stylesheet" href="/assets/css/just-the-docs-default.css"> <script type="text/javascript" src="/assets/js/vendor/lunr.min.js"></script> <script type="text/javascript" src="/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.7.1 --> <title>File formats | FSI Web Scraping Seminar</title> <meta name="generator" content="Jekyll v4.2.0" /> <meta property="og:title" content="File formats" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="[WIP] A collection of web scraping resources for the 2021 FSI summer course Humanistic Approaches to Media and Data." /> <meta property="og:description" content="[WIP] A collection of web scraping resources for the 2021 FSI summer course Humanistic Approaches to Media and Data." /> <link rel="canonical" href="/seminar-1/json-and-csv" /> <meta property="og:url" content="/seminar-1/json-and-csv" /> <meta property="og:site_name" content="FSI Web Scraping Seminar" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="File formats" /> <script type="application/ld+json"> {"description":"[WIP] A collection of web scraping resources for the 2021 FSI summer course Humanistic Approaches to Media and Data.","@type":"WebPage","url":"/seminar-1/json-and-csv","headline":"File formats","@context":"https://schema.org"}</script> <!-- End Jekyll SEO tag --> </head> <body> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header"> <a href="/" class="site-title lh-tight"> FSI Web Scraping Seminar </a> <a href="#" id="menu-button" class="site-button"> <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg> </a> </div> <nav role="navigation" aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item"><a href="/" class="nav-list-link">Home</a></li><li class="nav-list-item active"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/seminar-1" class="nav-list-link">Seminar 1</a><ul class="nav-list "><li class="nav-list-item "><a href="/seminar-1/python" class="nav-list-link">Python programming refresher</a></li><li class="nav-list-item "><a href="/seminar-1/colab" class="nav-list-link">Intro to Colab</a></li><li class="nav-list-item active"><a href="/seminar-1/json-and-csv" class="nav-list-link active">File formats</a></li><li class="nav-list-item "><a href="/seminar-1/tweepy" class="nav-list-link">Intro to Tweepy</a></li><li class="nav-list-item "><a href="/seminar-1/apis" class="nav-list-link">Intro to APIs</a></li><li class="nav-list-item "><a href="/seminar-1/munge-json" class="nav-list-link">Data cleaning</a></li><li class="nav-list-item "><a href="/seminar-1/examples" class="nav-list-link">How to develop a research question</a></li></ul></li></ul> </nav> <footer class="site-footer"> This site uses <a href="https://github.com/pmarsceill/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll. </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search FSI Web Scraping Seminar" aria-label="Search FSI Web Scraping Seminar" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> </div> <div id="main-content-wrap" class="main-content-wrap"> <nav aria-label="Breadcrumb" class="breadcrumb-nav"> <ol class="breadcrumb-nav-list"> <li class="breadcrumb-nav-list-item"><a href="/seminar-1">Seminar 1</a></li> <li class="breadcrumb-nav-list-item"><span>File formats</span></li> </ol> </nav> <div id="main-content" class="main-content" role="main"> <h1 id="working-with-different-file-formats"> <a href="#working-with-different-file-formats" class="anchor-heading" aria-labelledby="working-with-different-file-formats"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Working with different file formats </h1> <h2 id="what-is-a-csv"> <a href="#what-is-a-csv" class="anchor-heading" aria-labelledby="what-is-a-csv"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> What is a CSV? </h2> <p>If you’ve ever worked with a spreadsheet, you know what a CSV is. A CSV is just a standardized way of storing data in a table. CSV stands for “Comma Separated Value”, meaning literally each value in row is separated by a comma. Another popular format is TSV or “Tab Separated Value”. It’s the same as a CSV, but just separates values by tabs. This is especially useful when there are a lot of commas in your data. Here’s what a CSV looks like, (Fortune 100 companies and their Twitter handles):</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Corporation,URL,Rank,Handle,Sector
Walmart,https://twitter.com/Walmart,1,Walmart,Retailing
Amazon.com,https://twitter.com/amazon,2,amazon,Retailing
Exxon Mobil,https://twitter.com/exxonmobil,3,exxonmobil,Energy
</code></pre></div></div> <p>That data when loaded into Excel or Google Sheets would look like this:</p> <div class="table-wrapper"><table> <thead> <tr> <th>Corporation</th> <th>URL</th> <th>Rank</th> <th>Handle</th> <th>Sector</th> </tr> </thead> <tbody> <tr> <td>Walmart</td> <td>https://twitter.com/Walmart</td> <td>1</td> <td>Walmart</td> <td>Retailing</td> </tr> <tr> <td>Amazon.com</td> <td>https://twitter.com/amazon</td> <td>2</td> <td>amazon</td> <td>Retailing</td> </tr> <tr> <td>Exxon Mobil</td> <td>https://twitter.com/exxonmobil</td> <td>3</td> <td>exxonmobil</td> <td>Energy</td> </tr> </tbody> </table></div> <p>CSVs are important because they are non-priorietary and plain text. Therefore they can easily be parsed and created by the software programs we write. We’ll get explain how to parse CSVs when we learn about the <a href="../seminar-2/introduction-to-pandas">Pandas library next week.</a></p> <p>One drawback of CSVs is that they are limited to one value for each row and each column. If we were trying to add a <code class="language-plaintext highlighter-rouge">Hashtags Used</code> column, we might get ten or fifteen values in each row. If, for example, Walmart used the hashtags “#retail”, “#IndependenceDay”, and “#savings”, we could combine with some kind of unique character like a semicolon: <code class="language-plaintext highlighter-rouge">retail;IndependenceDay;savings</code>. Or we could use JSON…</p> <h2 id="what-is-json"> <a href="#what-is-json" class="anchor-heading" aria-labelledby="what-is-json"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> What is JSON? </h2> <p>Whenever scraping the web, you will inevitably get a JSON (often pronounced like Jason) response. It’s arguably the most popular data format on the web. JSON stands for “JavaScript Object Notation”, but you really don’t need to remember this. It’s a combination of nested lists and dictionaries, the same kind of lists and dictionaries that you’d use in python.</p> <details> <summary><a class="btn btn-blue">View an example tweet JSON from Twitter</a></summary> <script src="https://gist.github.com/kmcelwee/e09c9f03930886b5958fca287e648e36.js"></script> </details> <p>As you can see, there’s <em>a lot</em> of information for just a single tweet, and representing that information in a CSV would be nearly impossible. JSON makes it easy to communicate complex datasets in a plain text format.</p> <h3 id="parsing-json-in-python"> <a href="#parsing-json-in-python" class="anchor-heading" aria-labelledby="parsing-json-in-python"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Parsing JSON in Python </h3> <p>Again, JSON is just a combination of dictionaries and lists. To open a JSON file and get certain values, you’d treat it as you would any list or dictionary.</p> <p>You can load a JSON file using Python’s <code class="language-plaintext highlighter-rouge">json</code> library:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">json</span>

<span class="n">json_file_path</span> <span class="o">=</span> <span class="s">'tweet.json'</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">json_file_path</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">tweet</span> <span class="o">=</span> <span class="n">json</span><span class="p">.</span><span class="n">load</span><span class="p">(</span><span class="n">json_file_path</span><span class="p">)</span>

</code></pre></div></div> <p>Feel free to copy the following into a Colab notebook and mess around with the <code class="language-plaintext highlighter-rouge">tweet</code> variable. Here are some examples of getting certain values:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">requests</span>

<span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="s">'https://raw.githubusercontent.com/kmcelwee/fsi-web-scraping-seminar/main/data/tweet.json'</span><span class="p">)</span>
<span class="n">tweet</span> <span class="o">=</span> <span class="n">json</span><span class="p">.</span><span class="n">loads</span><span class="p">(</span><span class="n">r</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>
<span class="c1"># To get the text of this tweet
</span><span class="n">tweet</span><span class="p">[</span><span class="s">'full_text'</span><span class="p">]</span>
<span class="c1"># To get the users mentioned in this tweet
</span><span class="n">tweet</span><span class="p">[</span><span class="s">'entities'</span><span class="p">][</span><span class="s">'user_mentions'</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="s">'screen_name'</span><span class="p">]</span>
</code></pre></div></div> <p>It can sometimes be difficult to figure out the path to a variable in JSON, so some trial and error is predictable.</p> <p>💡 <strong>Exercise: Can you make a list of the hashtags with the example tweet provided above?</strong></p> <details> <summary><a class="btn btn-purple">View Solution</a></summary> <script src="https://gist.github.com/kmcelwee/6e8e20b4321bf2fe2e5ce7a7f171e396.js"></script> </details> </div> </div> <div class="search-overlay"></div> </div> </body> </html>
